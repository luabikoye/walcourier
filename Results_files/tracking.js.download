var trackingApp={};trackingApp.defaultHistoryRows=3;trackingApp.mobileWidth=768;trackingApp.holidayArray=null;trackingApp.cantUseArray={};trackingApp.showTrackingResults=function(){$("#tracked-numbers").slideDown("slow")};trackingApp.hideTrackingResults=function(){$("#tracked-numbers").slideUp("slow")};trackingApp.expandTrackingResult=function(a){$(a).parent().find(".product_additional_information").slideDown("slow")};trackingApp.collapseTrackingResult=function(a){$(a).parent().find(".product_additional_information").slideUp("slow");$(a).html('See More <i class="icon-carat_down"></i>');$("html, body").animate({scrollTop:$(a).closest(".track-bar-container").offset().top},"slow")};trackingApp.expandTrackingResult=function(a){$(a).parent().find(".product_additional_information").slideDown("slow");$(a).html('See Less <i class="icon-carat_up"></i>')};trackingApp.removeTrackedItem=function(a){$(a).parents(".track-bar-container").fadeOut("slow",function(){$(a).parents(".track-bar-container").remove()})};trackingApp.collapseTrackingHistory=function(a){$(a).parent().parent().find("table tr:nth-child(n+"+trackingApp.defaultHistoryRows+")").hide();$(a).html('See More <i class="icon-carat_down"></i>');$("html, body").animate({scrollTop:$(a).closest(".tracking_history_container").offset().top},"slow")};trackingApp.expandTrackingHistory=function(a){$(a).parent().parent().find("table tr").not(".row_notification").show();$(a).html('See Less <i class="icon-carat_up"></i>')};trackingApp.addProofEmailBlock=function(e){var f=$(e).attr("id").split("_")[1],c=$("#proofOfDeliveryPanel_"+f),b=$(c.selector+" .podEmailInput"),d=b.length;d++;if(d>3){$(e).hide()}else{var a='<div class="form-group"><label for="proofOfDelivery_email'+d+"_"+f+'">Email Address</label><input type="email" class="form-control podEmailInput" id="proofOfDelivery_email'+d+"_"+f+'" name="tEmail'+d+'" placeholder="email123@mail.com" pattern="^([a-zA-Z0-9_\\-\\.]+)@([a-zA-Z0-9_\\-\\.]+).([a-zA-Z]{2,5})$" data-pattern-error="Please enter a valid e-mail address" data-required-error="Please enter your e-mail address"><div class="help-block with-errors"></div></div>';$(e).before(a);$("#proofOfDelivery_email"+d+"_"+f).focus();$("#proofOfDelivery_"+f).validator("update");if(d===3){$(e).hide()}}};trackingApp.addReturnReceiptEmailBlock=function(d){var f=$(d).attr("id").split("_")[1],c=$("#returnReceipt_"+f),b=$(c.selector+" .rreEmailInput"),e=b.length;e++;if(e>3){$(d).hide()}else{var a='<div class="form-group"><label for="returnReceiptEmail_email'+e+"_"+f+'">Email Address</label><input type="email" class="form-control rreEmailInput" id="returnReceiptEmail_email'+e+"_"+f+'" name="tEmail'+e+'" placeholder="email123@mail.com" pattern="^([a-zA-Z0-9_\\-\\.]+)@([a-zA-Z0-9_\\-\\.]+).([a-zA-Z]{2,5})$" data-pattern-error="Please enter a valid e-mail address" data-required-error="Please enter your e-mail address"><div class="help-block with-errors"></div></div>';$(d).before(a);$("#returnReceiptEmail_email"+e+"_"+f).focus();$("#returnReceiptEmail_"+f).validator("update");if(e===3){$(d).hide()}}};trackingApp.addEmailUpdateEmailBlock=function(e){var f=$(e).attr("id").split("_")[1],b=$("#textAndEmailUpdatesPanel_"+f),c=$(b.selector+" .euEmailInput"),d=c.length;d++;if(d>3){$(e).hide()}else{var a='<div class="form-group"><label for="emailUpdate_name'+d+"_"+f+'">Name</label><input type="text" class="form-control" id="emailUpdate_name'+d+"_"+f+'" name="name'+d+'" placeholder="First Last" pattern="^[\\w\\-_&.,`#@!\\s]+$" data-pattern-error="Please enter a valid name" data-required-error="Please enter your name"><div class="help-block with-errors"></div></div><div class="form-group"><label>Email Address</label><input type="email" id="emailUpdate_email'+d+"_"+f+'" name="email'+d+'" class="form-control euEmailInput" pattern="^([a-zA-Z0-9_\\-\\.]+)@([a-zA-Z0-9_\\-\\.]+).([a-zA-Z]{2,5})$" data-pattern-error="Please enter a valid e-mail address" data-required-error="Please enter your e-mail address" placeholder="email123@mail.com"><div class="help-block with-errors"></div></div>';$(e).before(a);$("#emailUpdate_name"+d+"_"+f).focus();$("#textAndEmailUpdate_"+f).validator("update");if(d===3){$(e).hide()}}};trackingApp.getQueryStringParam=function(e){var b=window.location.search.substring(1);var c=b.split("&");for(var a=0;a<c.length;a++){var d=c[a].split("=");if(decodeURIComponent(d[0])==e){return decodeURIComponent(d[1])}}};trackingApp.initDeliveryInstructions=function(a){if(isUserLoggedIn){trackingApp.submitDeliveryInstructions($("#delivery-instructions_"+a),a)}else{$("#diButton_"+a).text("Sign In")}trackingApp.radioFormShowHideListener(a);$("#delivery-instructions_"+a+" .continue-delivery").on("click",function(c){c.preventDefault();if($(this).text()==="Sign In"){window.location=trackSigninUrl}else{var b=this.id.split("_")[1];var d=$("#delivery-instructions_"+b);trackingApp.submitDeliveryInstructions(d,b)}});$(" #changeDeliveryInstructions_location_"+a).on("change",function(){var b=this.id.split("_")[2];if($(this).val()==="Other"){$("#changeDeliveryInstructions_location_other_"+b).closest(".row").show()}else{$("#changeDeliveryInstructions_location_other_"+b).closest(".row").hide()}$("#changeDeliveryInstructions_"+b).validator("update")});$("#delivery-instructions_"+a+" .change-options-btn").on("click",function(c){c.preventDefault();var b=this.id.split("_")[1];$("#delivery-instructions_"+b+" .panel-actions-content.delivery-instructions-content.success").addClass("hidden");$("#delivery-instructions_"+b+" .panel-actions-content.delivery-instructions-content.error").addClass("hidden");$("#delivery-instructions_"+b+" .change-delivery-module.step-4").hide();$("#delivery-instructions_"+b+" .change-delivery-module.step-3").show();$("#delivery-instructions_"+b+" .main-continue-btn").show()});$("#delivery-instructions_"+a+" .insurance_checkbox").on("change",function(){var b=this.id.split("_")[1];var f=$("#delivery-instructions_"+b);var c=$(f.selector+" .insurance-response-error"),d=$(f.selector+" .more_insurance"),e=$(f.selector+" .insuranceCostField");c.html("");c.hide();if($(this).not(":checked")){$(d.selector+" .insuranceUpgradeResult").hide();$(d.selector+' input[name="tInsuranceUpgrade"]').val("");e.val("0");trackingApp.DI_updateTotal(f)}$("#delivery-instructions_"+b+" .more_insurance").toggle()});$("#delivery-instructions_"+a+" .calculatePrice").on("click",function(o){o.preventDefault();var j=this.id.split("_")[1];var h=$("#delivery-instructions_"+j);var c=$(h.selector+" .actions_form"),r=$(c.selector+' input[name="label"]').val();var s=trackingApp.DI_handleInsuranceErrors(h),q=$(h.selector+" .insurance-response-error"),p=$(h.selector+" .insuranceUpgradeResult"),d=$(h.selector+" .insuranceCostField"),b=$(h.selector+" .insuranceValueContainer"),g=$(h.selector+" .additionalInsurance"),n=$(h.selector+" .insuranceCost");i=0,l=s.length;if(l>0){var t="";for(;i<l;i++){t+=s[i]}q.html(t);q.show();p.hide();q.focus();d.val("0");trackingApp.DI_updateTotal(h)}else{q.html("");q.hide();var m=$(h.selector+" .change-delivery-module[data-deliverymodule=4]");var f=$(m.selector+" input").serialize();var k="easrFunc=CalInsurance&";k+="label="+r+"&";k+=f;$.ajax({url:"/go/TrackConfirmEasrAJAXAction.action",type:"POST",dataType:"json",data:k,success:function(e){if(e.status===true){if(b.css("display")=="none"){g.html("$"+e.formatInsuranceUpgrade+" Insurance")}else{g.html("$"+e.formatInsuranceUpgrade+" Additional Insurance")}n.html("$"+e.insuranceCost);d.val(e.insuranceCost);p.show();p.focus()}else{p.hide();q.html(e.errorScenario);q.show();d.val("0");q.focus()}trackingApp.DI_updateTotal(h)},error:function(u,e){p.hide();q.html("We were unable to calculate price at this time. Please try again later.");q.show();d.val("0");q.focus()}})}});$("#delivery-instructions_"+a+" .add-to-cart").on("click",function(j){j.preventDefault();var g=this.id.split("_")[1];var f=$("#delivery-instructions_"+g);var b=$(f.selector+" .insurance_checkbox");if(b.is(":checked")){var n=trackingApp.DI_handleInsuranceErrors(f),h=0,d=n.length,m=$(f.selector+" .insurance-response-error"),k=$(f.selector+" .insuranceUpgradeResult"),c=$(f.selector+" .insuranceCostField");if(d>0){var o="";for(;h<d;h++){o+=n[h]}m.html(o);m.show();k.hide();m.focus();c.val("0");trackingApp.DI_updateTotal(f)}else{m.html("");m.hide();trackingApp.DI_submitAddCart(f,this)}}else{trackingApp.DI_submitAddCart(f,this)}});$("#delivery-instructions_"+a+" .zip-code-lookup-results").hide();$("#delivery-instructions_"+a+" .btn-zip-code-search").on("click",function(h){h.preventDefault();var f=this.id.split("_")[1];var d=$("#delivery-instructions_"+f);var b=$(d.selector+" .zip-search-response-error");var k=$(d.selector+" .zip-code-lookup-results");var m=$("#changeDeliveryInstructions_"+f).validator("validate").find(".radio-option-4-content").has(".has-error").length;if(!m){b.html("");b.hide();var c=$(d.selector+" .actions_form"),n=$(c.selector+' input[name="tHfpZip"]').val(),j=$(c.selector+' input[name="label"]').val();var g="easrFunc=PoSearch&";g+="label="+j+"&";g+="deliveryOption=4&";g+="tHfpZip="+n;$.ajax({url:"/go/TrackConfirmEasrAJAXAction.action",type:"POST",dataType:"json",data:g,success:function(q){if(q.status===true){var p=q.hfplist.length;if(p<1){b.html("There were no locations found for the provided ZIP Code&trade;.");b.show();k.hide()}else{k.show();var e=$(d.selector+" .zip-code-result-list");var o=[];$.each(q.hfplist,function(w,z){var A="";var u=z.locationID;var t=z.locationName;var s=z.address1;var v=z.city;var r=z.state;var x=z.zip5;var y=z.zip4;if(w==(p-1)){A="last"}o.push('<div class="address-item radio actions_subsection '+A+'">');o.push("<label>");o.push('<input type="radio" required name="radio-option-zip-change" value="'+u+'"/>');o.push('<strong><span class="facName">'+t+'</span></strong><span class="facAddress">'+s+"</span><br>");o.push('<span class="facCity">'+v+'</span>, <span class="facState">'+r+'</span> <span class="facZip5">'+x+"</span>");if(y){o.push('-<span class="facZip4">'+y+"</span>")}o.push("</label>");o.push("</div>")});e.html(o.join(""))}}else{b.html(q.errorScenario);b.show();b.focus();k.hide()}},error:function(o,e){b.html("We were unable to calculate price at this time. Please try again later.");b.show();k.hide()}})}else{k.hide()}})};trackingApp.changeDeliveryNextStep=function(c,b,a){$(c.selector+" .change-delivery-module[data-deliverymodule="+b+"]").hide();$(c.selector+" .change-delivery-module[data-deliverymodule="+(b+1)+"]").show();$(c.selector+" .change-delivery-module[data-deliverymodule="+(b+1)+"] :input:visible:enabled:first").focus();if(b==3){$(c.selector+" .main-continue-btn").hide()}else{$(c.selector+" .main-continue-btn").show()}if(window.innerWidth<trackingApp.mobileWidth){$("html, body").animate({scrollTop:$(c.selector+" .change-delivery-module[data-deliverymodule="+(b+1)+"]").offset().top},"slow")}if(b>3){b=-1}b++;if(b>0){$(c.selector+" .main-continue-btn").text("Continue")}else{$(c.selector+" .main-continue-btn").text("Sign In")}if(b===4){if(a==="3"){$(c.selector+" .change-delivery-module.step-4 .change-options-content").show();$(c.selector+" .change-delivery-module.step-4 .confirm_text").hide()}else{if(a==="4"){$(c.selector+" .change-delivery-module.step-4 .change-options-content").hide();$(c.selector+" .change-delivery-module.step-4 .confirm_text").show();$(c.selector+' .change-delivery-module[data-deliverymodule="4"]').find(".hint").focus()}}}$(c.selector+" .actions_form").validator("update")};trackingApp.radioFormShowHideListener=function(d){var c=$("#delivery-instructions_"+d);var b=$(c.selector+" .delivery-change-option");var a=$(c.selector+" .delivery-change-radio-content");a.hide();$(c.selector+" .radio-option-1").prop("checked",true);$(c.selector+' .delivery-change-radio-content[data-radioContent="1"]').show();var c=$("#delivery-instructions_"+d);$(c.selector+" input[name='deliveryOption']").val("1");b.change(function(f){trackingApp.updateValidators();var g=$(this).data().radiooption;$(c.selector+" input[name='deliveryOption']").val(g);a.each(function(e,h){if(g==$(h).data().radiocontent){$(h).show();if(window.innerWidth<trackingApp.mobileWidth){$("html, body").animate({scrollTop:$(h).parent().offset().top},"slow")}}else{if(g!=$(h).data().radiocontent){$(h).hide()}}});$(c.selector+" .actions_form").validator("update");$(c.selector+" .panel-actions-content.delivery-instructions-content.success").addClass("hidden");$(c.selector+" .panel-actions-content.delivery-instructions-content.error").addClass("hidden")})};trackingApp.updateValidators=function(){$(".proofOfDelivery").validator("update");$(".textAndEmailUpdate").validator("update");$(".changeDeliveryInstructions").validator("update");$("#trackPackage").validator("update");$(".scheduleRedelivery").validator("update");$(".returnReceiptEmail").validator("update");$(".trackPOD").validator("update")};trackingApp.adjustHeight=function(){$("textarea").each(function(){this.setAttribute("style","height:"+(this.scrollHeight)+"px;overflow-y:hidden;")}).on("touchstart touchend input paste",function(){this.style.height="auto";this.style.height=(this.scrollHeight)+"px"})};trackingApp.checkKeyboardState=function(){if($(document.activeElement).attr("type")==="text"){document.activeElement.blur()}else{}};trackingApp.submitForm=function(){var b=$("#tracking-input").val().replace(/ /g,"").split("\n")+",",a=b.split(",").length,c=$("input[id=tRef]").val();$("input[id=tLc]").val(a);$("input[id=tLabels]").val(b);$("#trackPackage").submit()};$(document).ready(function(j){if($().mask){$(".phone").mask("000-000-0000");$(".zipcode").mask("00000-0000")}var c='<a href="#" role="button" class="see-all show-less tracking-result-collapser">See More <i class="icon-carat_down"></i></a>';$("div.product_additional_information:not(:eq(0))").hide();$("div.product_additional_information:not(:eq(0))").parent().parent().next().replaceWith(c);var f=$("select.state");if(typeof trackingData!=="undefined"){for(var d=0,m=trackingData.states.length;d<m;d++){f.append('<option value="'+trackingData.states[d].value+'">'+trackingData.states[d].label+"</option>")}}trackingApp.defaultHistoryRows+=3;$(".tracking_history tr:nth-child(n+"+trackingApp.defaultHistoryRows+")").hide();$("#tracking-input").on("touchstart input paste blur",trackingApp.adjustHeight);var o=$.Deferred();o.done(trackingApp.checkKeyboardState,trackingApp.adjustHeight,trackingApp.submitForm);$(".tracking-btn").on("click",function(){var e=$("#trackPackage").validator("validate").has(".has-error").length;if(!e){o.resolve()}});$(".tracking-btn").on("click",function(p){if($("#tracked-numbers").css("display")==="none"){trackingApp.showTrackingResults();trackingApp.updateValidators()}else{}});$(".remove-span").on("click",function(p){p.preventDefault();trackingApp.removeTrackedItem(this)});$(".tracking-result-collapser").on("click",function(p){p.preventDefault();if($(this).text().indexOf("More")!==-1){trackingApp.expandTrackingResult(this);trackingApp.updateValidators()}else{trackingApp.collapseTrackingResult(this);$(this).parent().find(".action_jump").show()}});$(".tracking-history-collapser").on("click",function(p){p.preventDefault();if($(this).text().indexOf("More")!==-1){trackingApp.expandTrackingHistory(this)}else{trackingApp.collapseTrackingHistory(this)}});$(".avail_actions").on("click",function(q){q.preventDefault();var p=this;$("html, body").animate({scrollTop:$(p).parent().parent().find(".available-actions-menu-container").offset().top},"slow")});$(".delivery-attempted-notification a").on("click",function(q){q.preventDefault();var p=this;$(p).closest(".track-bar-container").find(".schedule-redelivery-anchor .panel-collapse").collapse("show");$("html, body").animate({scrollTop:$(p).closest(".track-bar-container").find(".schedule-redelivery-anchor").offset().top},"slow")});$("a.action_jump").on("click",function(q){q.preventDefault();var p=$(this).attr("data-action");a(p,this);trackingApp.updateValidators()});function a(p,q){if($(q).closest(".track-bar-container").find(".tracking-result-collapser").text().lastIndexOf("More")!==-1){$(q).closest(".track-bar-container").find(".tracking-result-collapser").click()}if($(q).parent().attr("class")=="status_feed"){$(q).hide()}else{}var e=q;$(q).closest(".track-bar-container").find("."+p+"-anchor .panel-collapse").collapse("show");$("html, body").animate({scrollTop:$(q).closest(".track-bar-container").find("."+p+"-anchor").offset().top},"slow")}$(".collapser").on("click",function(q){q.preventDefault();var p=$(this).next();p.collapse("toggle");trackingApp.updateValidators()});$(".panel").on("shown.bs.collapse",function(){$(this).find(".down-arr, .up-arr").toggleClass("down-arr up-arr");$(this).find(".panel-word").toggleClass("red-underline")});$(".panel").on("hidden.bs.collapse",function(){$(this).find(".down-arr, .up-arr").toggleClass("down-arr up-arr");$(this).find(".panel-word").toggleClass("red-underline")});$(".hint").on("click",function(p){$(".speech_bubble").hide();var q=$(this).find(".speech_bubble");if(window.innerWidth<trackingApp.mobileWidth){p.preventDefault();$("#modal .modal-body").html(q.html()).css("fontSize","14px");$("#modal").modal("show")}else{q.show()}});$("#modal").on("hidden.bs.modal",function(p){$("#modal .modal-body").html("")});$("body").on("click touchstart",function(p){if($(p.target).attr("class")&&$(p.target).attr("class").indexOf("icon-tooltip")>-1){return}else{$(".speech_bubble").hide()}});$(".readMore").on("click",function(p){p.preventDefault();if($(this).hasClass("closed")){$(this).parent().find(".collapsible").removeClass("collapsed");$(this).removeClass("closed");$(this).find("span").text("Read less")}else{$(this).parent().find(".collapsible").addClass("collapsed");$(this).addClass("closed");$(this).find("span").text("Read more")}});$(".track-another-package-close").hide();$(".track-another-package-open").on("click",function(){$("#trackPackage").validator("update");$(".tracking-group").toggle();$(".tracking_form_container h3").toggleClass("open");trackingApp.updateValidators();if($(".tracking-group").css("display")!="none"){$(".track-another-package-close").show()}else{if($(".tracking-group").css("display")=="none"){$(".track-another-package-close").hide()}}});$(".track-another-package-close").on("click",function(){$(".tracking-group").hide();$(".tracking_form_container h3").removeClass("open");if($(".tracking-group").css("display")!="none"){$(".track-another-package-close").show()}else{if($(".tracking-group").css("display")=="none"){$(".track-another-package-close").hide()}}});trackingApp.submitDeliveryInstructions=function(B,H){if($(B.selector+" .change-delivery-module").filter(":visible").length==0){trackingApp.changeDeliveryNextStep(B,0,"")}else{var w=$(B.selector+" .actions_form");var A=parseInt($(B.selector+" .change-delivery-module").filter(":visible").data().deliverymodule);var I="";if($(w.selector+" .radio-option-1").is(":checked")){I="1"}else{if($(w.selector+" .radio-option-2").is(":checked")){I="2"}else{if($(w.selector+" .radio-option-3").is(":checked")){I="3"}else{if($(w.selector+" .radio-option-4").is(":checked")){I="4"}}}}var L=w.validator("validate").has(".has-error").length;var M=true;if(A===3){L=$(w.selector+" .radio-option-"+I+"-content").has(".has-error").length}if(!L){if(A===0||A===1){trackingApp.changeDeliveryNextStep(B,A,"")}else{var x=$(w.selector+' input[name="label"]').val(),u=$(w.selector+' input[name="destinationZip"]').val(),r=$(w.selector+' input[name="tFwdCustomerFName"]').val(),v=$(w.selector+' input[name="custRegZip5"]').val();var N="";var C=$(B.selector+" .change-delivery-module[data-deliverymodule="+A+"]");var F=$(C.selector+" input, textarea, select").serialize();if(A===2){N="easrFunc=Verify&";N+="label="+x+"&";N+="destinationZip="+u+"&";N+=F}else{if(A===3){if(I==="4"){var t=$(B.selector+" .zip-code-lookup-results");var y=$(t.selector+' input[name="radio-option-zip-change"]:checked');var z=$(t.selector+" .zip-search-response-error");if(y!=null&&y!=""&&y!=undefined&&y.length>0){z.html("");z.hide();var E=y.closest("div.address-item"),J=y.val(),D=E.find(".facAddress").text(),G=E.find(".facCity").text(),K=E.find(".facState").text(),q=E.find(".facZip5").text(),s=E.find(".facZip4").text();N="easrFunc=Dropoff&";N+="label="+x+"&";N+="custRegZip5="+v+"&";N+="deliveryOption="+I+"&";N+="hfpFacilityId="+J+"&";N+="hfpFacilityAddress="+D+"&";N+="hfpFacilityCity="+G+"&";N+="hfpFacilityState="+K+"&";N+="hfpFacilityZip5="+q+"&";N+="hfpFacilityZip4="+s}else{M=false}}else{N="easrFunc=Dropoff&";N+="label="+x+"&";N+="custRegZip5="+v+"&";N+="deliveryOption="+I+"&";N+=F}}}$(B.selector+" .panel-actions-content.delivery-instructions-content.success").addClass("hidden");$(B.selector+" .panel-actions-content.delivery-instructions-content.error").addClass("hidden");if(M){var e=$("#diButton_"+H).text();$("#diButton_"+H).prop("disabled",true);$("#diButton_"+H).text("Processing");$.ajax({url:"/go/TrackConfirmEasrAJAXAction.action",type:"POST",dataType:"json",data:N,success:function(p){if(p.status===true){if(A===2){$(B.selector+" .radio-option-2-content .city").html(p.city);$(B.selector+" .radio-option-2-content .state").html(p.state);$(B.selector+" .radio-option-2-content .zip").html(p.zip);$(B.selector+" .panel-actions-content.delivery-instructions-content.error .firstName").html(p.firstName);trackingApp.changeDeliveryNextStep(B,A,I)}else{if(A===3){if(I==="1"||I==="2"){$(B.selector+" .change-delivery-module[data-deliverymodule="+A+"]").hide();$(B.selector+" .continue-delivery").parent().hide();$(B.selector+" .panel-actions-content.delivery-instructions-content.success").removeClass("hidden");$(B.selector+" .panel-actions-content.delivery-instructions-content.error").addClass("hidden");$(B.selector+" .panel-body.sample-number-panels").addClass("hidden");$(B.selector+" .panel-actions-content.delivery-instructions-content.success .firstName").html(p.firstName)}else{$(B.selector+' .change-delivery-module[data-deliverymodule=4] input[name="tFwdAddressLineOne"]').val(p.fwdAddressLineOne);$(B.selector+' .change-delivery-module[data-deliverymodule=4] input[name="tFwdAddressLineTwo"]').val(p.fwdAddressLineTwo);$(B.selector+' .change-delivery-module[data-deliverymodule=4] input[name="tFwdAddressCity"]').val(p.fwdAddressCity);$(B.selector+' .change-delivery-module[data-deliverymodule=4] input[name="tFwdAddressState"]').val(p.fwdAddressState);$(B.selector+' .change-delivery-module[data-deliverymodule=4] input[name="tFwdAddressZip5"]').val(p.fwdAddressZip5);$(B.selector+' .change-delivery-module[data-deliverymodule=4] input[name="tFwdAddressZip4"]').val(p.fwdAddressZip4);$(B.selector+' .change-delivery-module[data-deliverymodule=4] input[name="tFwdCustomerFName"]').val(p.fwdCustomerFName);$(B.selector+' .change-delivery-module[data-deliverymodule=4] input[name="tFwdCustomerMName"]').val(p.fwdCustomerMName);$(B.selector+' .change-delivery-module[data-deliverymodule=4] input[name="tFwdCustomerLName"]').val(p.fwdCustomerLName);$(B.selector+' .change-delivery-module[data-deliverymodule=4] input[name="tFwdCustomerCompany"]').val(p.fwdCustomerCompany);$(B.selector+' .change-delivery-module[data-deliverymodule=4] input[name="hfpFacilityId"]').val(p.hfpFacilityId);if(I==="3"){$(B.selector+" .change-options-content .fwdAddressLineOne").html(p.fwdAddressLineOne);$(B.selector+" .change-options-content .fwdAddressLineTwo").html(p.fwdAddressLineTwo);$(B.selector+" .change-options-content .fwdAddressCity").html(p.fwdAddressCity);$(B.selector+" .change-options-content .fwdAddressState").html(p.fwdAddressState);$(B.selector+" .change-options-content .fwdAddressZip5").html(p.fwdAddressZip5);if(p.fwdAddressZip4){$(B.selector+" .change-options-content .fwdAddressZip4").html("-"+p.fwdAddressZip4)}trackingApp.DI_displayMailSelection(B,p,I)}else{if(I==="4"){$(B.selector+" .confirm_text .fwdAddressLineOne").html(p.fwdAddressLineOne);$(B.selector+" .confirm_text .fwdAddressLineTwo").html(p.fwdAddressLineTwo);$(B.selector+" .confirm_text .fwdAddressCity").html(p.fwdAddressCity);$(B.selector+" .confirm_text .fwdAddressState").html(p.fwdAddressState);$(B.selector+" .confirm_text .fwdAddressZip5").html(p.fwdAddressZip5);if(p.fwdAddressZip4){$(B.selector+" .confirm_text .fwdAddressZip4").html("-"+p.fwdAddressZip4)}}}trackingApp.changeDeliveryNextStep(B,A,I)}}}}else{$(B.selector+" .panel-actions-content.delivery-instructions-content.error").removeClass("hidden");$(B.selector+" .panel-actions-content.delivery-instructions-content.success").addClass("hidden");$(B.selector+" .panel-actions-content.delivery-instructions-content.error .firstName").html(p.firstName);$(B.selector+" .panel-actions-content.delivery-instructions-content.error .errorScenario").html(p.errorScenario)}},error:function(O,p){$(B.selector+" .panel-actions-content.delivery-instructions-content.error").removeClass("hidden");$(B.selector+" .panel-actions-content.delivery-instructions-content.success").addClass("hidden");$(B.selector+" .panel-actions-content.delivery-instructions-content.error .errorScenario").html("the system is having technical difficulties")},complete:function(p){$("#diButton_"+H).prop("disabled",false);$("#diButton_"+H).text(e)}})}else{$(B.selector+" .panel-actions-content.delivery-instructions-content.error").removeClass("hidden");$(B.selector+" .panel-actions-content.delivery-instructions-content.success").addClass("hidden");$(B.selector+" .panel-actions-content.delivery-instructions-content.error .errorScenario").html("Post Office is not selected. Please select a Post Office.")}}}}};trackingApp.DI_displayMailSelection=function(w,y,B){var F=[],D=y.tService,E=y.servicePm,z=y.servicePme,C=y.xtraServiceSc,p=$(w.selector+" .insurance_checkbox"),t=$(w.selector+" .more_insurance"),u=$(w.selector+" .insuranceValueContainer"),r=$(w.selector+" .insuranceUpgradeResult"),A=$(w.selector+" .insuranceCostField");$.each(y.serviceList,function(K,O){var I=O.name;var P=O.name;var N=O.price;var M=O.description;var J=O.price;if(J!=null&&J.length>0){J="$"+J}var L="";if(D!=null&&D==I){L="checked"}if(P===E){P="Priority Mail"}F.push('<div class="actions_priced upsell_ServiceWrap">');F.push('<div class="radio">');F.push('<label><input type="radio" name="tService" value="'+I+'" '+L+" /><strong>"+P+"</strong></label>");F.push("<p>"+M+"</p>");F.push("</div>");F.push('<input type="hidden" class="upsell_service_amount" value="'+N+'"/>');F.push('<div class="price">');F.push("<strong>"+J+"</strong>");F.push("</div>");F.push("</div>")});$(w.selector+" .upsell_service_type_list").html(F.join(""));if(p!=null){p.prop("checked",false)}t.hide();r.hide();$(w.selector+" input[name='tInsuranceUpgrade']").val("");A.val("0");$(w.selector+" .insurance-response-error").html("");$(w.selector+" .insurance-response-error").hide();var s=y.hasInsurance;if(s!=null&&s=="true"){var G=y.formatInsuranceValue;u.html("<p>This shipment already includes $"+G+" of insurance.</p>");u.show()}else{u.hide()}var v=[];$.each(y.pmXtraServiceList,function(L,O){var J=O.name;var I=O.name;var N=O.price;var K=O.price;if(K!=null&&K.length>0){K="$"+K}var M="";if(L==0){M="checked"}if(I===C){I=C+"&trade;"}v.push('<div class="actions_priced upsell_PmExtraServiceWrap">');v.push('<div class="radio">');v.push('<label><input type="radio" name="tPmExtraService" value="'+J+'" '+M+" /><strong>"+I+"</strong></label>");v.push("</div>");v.push('<input type="hidden" class="upsell_pm_extra_service_amount" value="'+N+'"/>');v.push('<div class="price">');v.push("<strong>"+K+"</strong>");v.push("</div>");v.push("</div>")});$(w.selector+" .upsell_X_service_pm_type_list").html(v.join(""));var x=[];$.each(y.pmeXtraServiceList,function(L,O){var J=O.name;var I=O.name;var N=O.price;var K=O.price;if(K!=null&&K.length>0){K="$"+K}var M="";if(L==0){M="checked"}if(I===C){I=C+"&trade;"}x.push('<div class="actions_priced upsell_PmeExtraServiceWrap">');x.push('<div class="radio">');x.push('<label><input type="radio" name="tPmeExtraService" value="'+J+'" '+M+" /><strong>"+I+"</strong></label>");x.push("</div>");x.push('<input type="hidden" class="upsell_pme_extra_service_amount" value="'+N+'"/>');x.push('<div class="price">');x.push("<strong>"+K+"</strong>");x.push("</div>");x.push("</div>")});$(w.selector+" .upsell_X_service_pme_type_list").html(x.join(""));trackingApp.DI_updateExtraService(w,E,z);var e=$(w.selector+" input[name='tService']");if(e!=null){e.each(function(){$(this).on("click",function(I){if(p!=null){p.prop("checked",false)}t.hide();r.hide();$(w.selector+" input[name='tInsuranceUpgrade']").val("");A.val("0");$(w.selector+" .insurance-response-error").html("");$(w.selector+" .insurance-response-error").hide();trackingApp.DI_updateExtraService(w,E,z)})})}var H=$(w.selector+" input[name='tPmExtraService']");if(H!=null){H.each(function(){$(this).on("click",function(I){trackingApp.DI_updateTotal(w)})})}var q=$(w.selector+" input[name='tPmeExtraService']");if(q!=null){q.each(function(){$(this).on("click",function(I){trackingApp.DI_updateTotal(w)})})}};trackingApp.DI_updateExtraService=function(u,p,s){var t=$(u.selector+" input[name='tService']:checked").val(),r=$(u.selector+" .upsell_X_defaultWrap"),q=$(u.selector+" .upsell_X_pmServiceWrap"),e=$(u.selector+" .upsell_X_pmeServiceWrap");if(t!=null){if(t===p){r.hide();q.show();e.hide()}else{if(t===s){r.hide();q.hide();e.show()}else{r.show();q.hide();e.hide()}}}trackingApp.DI_updateTotal(u)};trackingApp.DI_updateTotal=function(x){var I=$(x.selector+" .upsellTotalAmount"),D=$(x.selector+" input[name='tService']:checked"),B=$(x.selector+" .upsell_X_pmServiceWrap"),G=$(x.selector+" input[name='tPmExtraService']:checked"),E=$(x.selector+" .upsell_X_pmeServiceWrap"),s=$(x.selector+" input[name='tPmeExtraService']:checked"),e=D.closest("div.upsell_ServiceWrap"),z=e.children(".upsell_service_amount"),t=parseFloat(z.val()),q=parseFloat($(x.selector+" .insuranceCostField").val()),v=$(x.selector+" .insuranceValueContainer"),H=$(x.selector+" .insuranceValueBIContainerWrapper"),u=$(x.selector+" .insuranceValueBIContainer"),C=$(x.selector+" .insuranceValueBIContainerPrice"),J=0;J+=t+q;H.hide();u.hide();C.hide();if(B!=null&&B.length!==0&&B.css("display")!="none"){if(G!=null&&G.length!==0){var A=G.closest("div.upsell_PmExtraServiceWrap"),F=A.children(".upsell_pm_extra_service_amount"),p=0;if(F!=null&&F.length!==0&&F.val().length>0){p=parseFloat(F.val())}J+=p;if(v.css("display")=="none"){u.html("<p>Insurance for packages valued up to $50</p>");C.html("<p><strong>FREE</strong></p>");u.show();C.show();H.show()}}}if(E!=null&&E.length!==0&&E.css("display")!="none"){if(s!=null&&s.length!==0){var w=s.closest("div.upsell_PmeExtraServiceWrap"),r=w.children(".upsell_pme_extra_service_amount"),y=0;if(r!=null&&r.length!==0&&r.val().length>0){y=parseFloat(r.val())}J+=y;if(v.css("display")=="none"){u.html("<p>Insurance for packages valued up to $100</p>");C.html("<p><strong>FREE</strong></p>");u.show();C.show();H.show()}}}I.html("$"+(J.toFixed(2)))};trackingApp.DI_handleInsuranceErrors=function(u){var p=$(u.selector+"  input[name='tInsuranceUpgrade']"),e=/^(\d*|\d+|\d{1,3},\d{3})(\.\d{1,2})?$/,s="Please enter a valid additional insurance amount and press 'Calculate Price'.",q="Please enter an additional insurance amount and press 'Calculate Price'.",r=p.val().trim(),t=[];if(r.length==0){t.push(q)}else{if(!e.test(r)){t.push(s)}else{if(parseFloat(r)<=0){t.push(s)}}}return t};trackingApp.DI_submitAddCart=function(s,q){var v=$("#tracking_page_wrapper .global-header-cart-2")[0];if(v!=null&&v.hasChildNodes()!=true){var w=document.createElement("script");w.setAttribute("src",atgCartWidgetUrl);v.appendChild(w)}var p=$(s.selector+" .actions_form"),y=$(p.selector+' input[name="label"]').val(),e="";var z=q.id.split("_")[0];if(z==="redirectAddCartButton"){e="3"}else{if(z==="hfpAddCartButton"){e="4"}}var u=$(s.selector+" .change-delivery-module[data-deliverymodule=4]");var r=$(u.selector+" input, radio").serialize();var t="easrFunc=AddCart&";t+="label="+y+"&";t+="deliveryOption="+e+"&";t+=r;$(s.selector+" .panel-actions-content.delivery-instructions-content.success").addClass("hidden");$(s.selector+" .panel-actions-content.delivery-instructions-content.error").addClass("hidden");var x=$(q).text();$(q).prop("disabled",true);$(q).text("Processing");$.ajax({url:"/go/TrackConfirmEasrAJAXAction.action",type:"POST",dataType:"json",data:t,success:function(A){if($("#global-header-cart")!=null){$("#global-header-cart").hide()}if(A.status===true){window.location.href=A.redirectUrl}else{$(s.selector+" .panel-actions-content.delivery-instructions-content.error").removeClass("hidden");$(s.selector+" .panel-actions-content.delivery-instructions-content.success").addClass("hidden");$(s.selector+" .panel-actions-content.delivery-instructions-content.error .firstName").html(A.firstName);$(s.selector+" .panel-actions-content.delivery-instructions-content.error .errorScenario").html(A.errorScenario);$(q).prop("disabled",false);$(q).text(x)}},error:function(B,A){$(s.selector+" .panel-actions-content.delivery-instructions-content.error").removeClass("hidden");$(s.selector+" .panel-actions-content.delivery-instructions-content.success").addClass("hidden");$(s.selector+" .panel-actions-content.delivery-instructions-content.error .firstName").html(tFwdCustomerFName);$(s.selector+" .panel-actions-content.delivery-instructions-content.error .errorScenario").html("the system is having technical difficulties");$(q).prop("disabled",false);$(q).text(x)}})};trackingApp.initTextAndEmailUpdates=function(e){trackingApp.activeTextAndEmailUpdates(e);$("#textAll_"+e).on("click",function(){if(this.checked){$("div#textAndEmailUpdatesPanel_"+e+" .text-enabled-option").prop("checked",true)}else{$("div#textAndEmailUpdatesPanel_"+e+" .text-enabled-option").prop("checked",false);$("#textUpdatePhoneNumber_"+e).val("");$("#agreedTextUpdates_"+e).prop("checked",false)}trackingApp.activeTextAndEmailUpdates(e)});$("#emailAll_"+e).on("click",function(){if(this.checked){$("div#textAndEmailUpdatesPanel_"+e+" .email-enabled-option").prop("checked",true)}else{$("div#textAndEmailUpdatesPanel_"+e+" .email-enabled-option").prop("checked",false);$("#emailUpdate_name1_"+e).val("");$("#emailUpdate_name2_"+e).val("");$("#emailUpdate_name3_"+e).val("");$("#emailUpdate_email1_"+e).val("");$("#emailUpdate_email2_"+e).val("");$("#emailUpdate_email3_"+e).val("")}trackingApp.activeTextAndEmailUpdates(e)});$("#textFuture_"+e+", #textToday_"+e+", #textDnd_"+e+", #textPickup_"+e+", #textPickup_"+e+", #textAlert_"+e+", #textOA_"+e).on("click",function(){var q=[],p=$("input.textupdates_"+e+":not(#textAll_"+e+")").length,r=$("input.textupdates_"+e+":checked:not(#textAll_"+e+")").length;console.log("selectedLength"+e+" text: "+r);$("input.text-updates-label:checked").each(function(){q.push($(this).attr("id"))});if(r===0){$("#textUpdatePhoneNumber_"+e).val("");$("#agreedTextUpdates_"+e).prop("checked",false)}if(r<p){$("#textAll_"+e).prop("checked",false)}else{$("#textAll_"+e).prop("checked",true)}});$("#emailFuture_"+e+", #emailToday_"+e+", #emailDnd_"+e+", #emailPickup_"+e+", #emailPickup_"+e+", #emailAlert_"+e+", #emailOA_"+e).on("click",function(){var q=[],p=$("input.emailupdates_"+e+":not(#emailAll_"+e+")").length,r=$("input.emailupdates_"+e+":checked:not(#emailAll_"+e+")").length;console.log("selectedLength"+e+" email: "+r);$("input.email-updates-label:checked").each(function(){q.push($(this).attr("id"))});if(r===0){$("#emailUpdate_name1_"+e).val("");$("#emailUpdate_name2_"+e).val("");$("#emailUpdate_name3_"+e).val("");$("#emailUpdate_email1_"+e).val("");$("#emailUpdate_email2_"+e).val("");$("#emailUpdate_email3_"+e).val("")}if(r<p){$("#emailAll_"+e).prop("checked",false)}else{$("#emailAll_"+e).prop("checked",true)}});$("#textAll_"+e+", #textFuture_"+e+", #textToday_"+e+", #textDnd_"+e+", #textPickup_"+e+", #textPickup_"+e+", #textAlert_"+e+", #textOA_"+e+",#emailAll_"+e+",#emailFuture_"+e+", #emailToday_"+e+", #emailDnd_"+e+", #emailPickup_"+e+", #emailPickup_"+e+", #emailAlert_"+e+", #emailOA_"+e).on("click",function(){trackingApp.activeTextAndEmailUpdates(e)});$("#textAndEmailUpdatesPanel_"+e+" .add-another-email").on("click",function(p){p.preventDefault();trackingApp.addEmailUpdateEmailBlock(this)});$("#textAndEmailUpdatesPanel_"+e+" button.getTextAndEmailUpdates").on("click",function(t){t.preventDefault();var p=this.id.split("_")[1];var s=$("#textAndEmailUpdatesPanel_"+p),q=$("#textAndEmailUpdate_"+p);$(s.selector+" .panel-actions-content.text-updates-content.success").addClass("hidden");$(s.selector+" .panel-actions-content.text-updates-content.error").addClass("hidden");$(s.selector+" .panel-actions-content.email-updates-content.success").addClass("hidden");$(s.selector+" .panel-actions-content.email-updates-content.error").addClass("hidden");$(s.selector+" .panel-actions-content.email-updates-content.error .data-error-div-result").html("");$(s.selector+" .panel-actions-content.email-updates-content.error .email-updates-error").removeClass("hidden");$(s.selector+" .panel-actions-content.email-updates-content.error .email-updates-error-number").html("");var r=q.validator("validate").has(".has-error").length;if(!r){trackingApp.getTextAndEmailUpdates(s,p)}})};trackingApp.activeTextAndEmailUpdates=function(q){var e=0;$.each($("div#checkbox-wrapper_"+q+" .text-updates-label"),function(r,s){if($(s).is(":checked")){e++}});if(e>0){$("#text-updates-wrapper_"+q).removeClass("hidden");$("#text-updates-messages_"+q).removeClass("hidden");$("#update-text-tac_"+q).removeClass("hidden");if(!$("div#textAndEmailUpdatesPanel_"+q+" .textRequired").prop("required")){$("div#textAndEmailUpdatesPanel_"+q+" .textRequired").attr("required",true)}}else{$("#text-updates-wrapper_"+q).addClass("hidden");$("#text-updates-messages_"+q).addClass("hidden");$("#update-text-tac_"+q).addClass("hidden");if($("div#textAndEmailUpdatesPanel_"+q+" .textRequired").prop("required")){$("div#textAndEmailUpdatesPanel_"+q+" .textRequired").removeAttr("required")}}var p=0;$.each($("div#checkbox-wrapper_"+q+" .email-updates-label"),function(r,s){if($(s).is(":checked")){p++}});if(p>0){$("#email-updates-wrapper_"+q).removeClass("hidden");$("#teuButton_"+q).removeClass("hidden");if(!$("div#textAndEmailUpdatesPanel_"+q+" .emailRequired").prop("required")){$("div#textAndEmailUpdatesPanel_"+q+" .emailRequired").attr("required",true)}}else{$("#email-updates-wrapper_"+q).addClass("hidden");$("#teuButton_"+q).addClass("hidden");if($("div#textAndEmailUpdatesPanel_"+q+" .emailRequired").prop("required")){$("div#textAndEmailUpdatesPanel_"+q+" .emailRequired").removeAttr("required")}}if($("div#checkbox-wrapper_"+q+" :checkbox:checked").length>0){$("#teuButton_"+q).removeClass("hidden")}else{$("#teuButton_"+q).addClass("hidden")}};trackingApp.getTextAndEmailUpdates=function(r,e){var p=$("#textAndEmailUpdate_"+e+", .input, .checkbox").serialize();var q=$("#teuButton_"+e).text();$("#teuButton_"+e).prop("disabled",true);$("#teuButton_"+e).text("Processing");$.ajax({url:"/go/TrackConfirmRequestUpdateAJAXAction",type:"POST",dataType:"json",data:p,success:function(s){if(s.textResult.length>0){if(s.textServiceError=="false"){$(r.selector+" .panel-actions-content.text-updates-content.success").removeClass("hidden");$(r.selector+" .panel-actions-content.text-updates-content.error").addClass("hidden");$(r.selector+" .euPanalAction").addClass("hidden");$(r.selector+" .panel-actions-content.text-updates-content.success .text-updates-success-number").html(s.label);$(r.selector+" .panel-actions-content.text-updates-content.success .text-updates-success-phone").html(s.textResult)}else{$(r.selector+" .panel-actions-content.text-updates-content.error").removeClass("hidden");$(r.selector+" .panel-actions-content.text-updates-content.success").addClass("hidden");$(r.selector+" .panel-actions-content.text-updates-content.error .data-error-div-result").html(s.textResult)}}if(s.emailResult.length>0){if(s.emailServiceError=="false"){$(r.selector+" .panel-actions-content.email-updates-content.success").removeClass("hidden");$(r.selector+" .panel-actions-content.email-updates-content.error").addClass("hidden");$(r.selector+" .euPanalAction").addClass("hidden");$(r.selector+" .panel-actions-content.email-updates-content.success .email-updates-success-number").html(s.label);$(r.selector+" .panel-actions-content.email-updates-content.success .email-updates-success-email").html(s.emailResult.replace(/\s/g,"<br/>"))}else{$(r.selector+" .panel-actions-content.email-updates-content.error").removeClass("hidden");$(r.selector+" .panel-actions-content.email-updates-content.success").addClass("hidden");$(r.selector+" .panel-actions-content.email-updates-content.error .data-error-div-result").html(s.emailResult.replace(/\s/g,"<br/>"))}}},error:function(u,s){var t="An error occurred while creating your Online email update. Please try again later.";if(u.status===0){t="Not connect.\n Verify Network."}else{if(u.status==404){t="Requested page not found. [404]"}else{if(u.status==500){t="Internal Server Error [500]."}else{if(s==="parsererror"){t="Requested JSON parse failed."}else{if(s==="timeout"){t="Time out error."}else{if(s==="abort"){t="Ajax request aborted."}else{t="Uncaught Error.\n"+u.responseText}}}}}}$(r.selector+" .panel-actions-content.email-updates-content.error").removeClass("hidden");$(r.selector+" .panel-actions-content.email-updates-content.success").addClass("hidden");$(r.selector+" .panel-actions-content.email-updates-content.error .email-updates-error").addClass("hidden");$(r.selector+" .panel-actions-content.email-updates-content.error .email-updates-error-number").html(t);$(r.selector+" .panel-actions-content.email-updates-content.error").removeClass("hidden");$(r.selector+" .panel-actions-content.email-updates-content.success").addClass("hidden");$(r.selector+" .panel-actions-content.email-updates-content.error .email-updates-error").addClass("hidden");$(r.selector+" .panel-actions-content.email-updates-content.error .email-updates-error-number").html(t)},complete:function(s){$("#teuButton_"+e).prop("disabled",false);$("#teuButton_"+e).text(q)}})};trackingApp.initScheduleRedelivery=function(p){$("#scheduleRedelivery-useSameAddress_"+p).on("change",function(){var u=this.id.split("_")[1];var v=$("#scheduleRedelivery_"+u),x=$(v.selector+' input[name="lFNameRd"]'),q=$(v.selector+' input[name="lLNameRd"]'),y=$(v.selector+' input[name="lStreetRd"]'),r=$(v.selector+' input[name="lStreet2Rd"]'),s=$(v.selector+' input[name="lCityRd"]'),w=$(v.selector+' select[name="lStateRd"]'),t=$(v.selector+' input[name="lZipRd"]');if($(this).is(":checked")){x.val($(v.selector+" .profile-first-name").val());q.val($(v.selector+" .profile-last-name").val());y.val($(v.selector+" .profile-address-one").val());r.val($(v.selector+" .profile-address-two").val());s.val($(v.selector+" .profile-city").val());w.val($(v.selector+" .profile-state").val());t.val($(v.selector+" .profile-zip").val())}else{x.val("");q.val("");y.val("");r.val("");s.val("");w.val("");t.val("")}$("#scheduleRedelivery_"+p).validator("destroy");$("#scheduleRedelivery_"+p).validator()});$("#redeliveryPanel_"+p+" button.doScheduleRedelivery").on("click",function(u){u.preventDefault();var q=this.id.split("_")[1];var r=$("#redeliveryPanel_"+q),s=$("#scheduleRedelivery_"+q);$("#redeliveryPanel_"+p+" .datepicker").prop("readonly",false);$(r.selector+" .panel-actions-content.scheduleRedelivery-content.success").addClass("hidden");$(r.selector+" .panel-actions-content.scheduleRedelivery-content.error").addClass("hidden");var t=s.validator("validate").has(".has-error").length;if(!t){trackingApp.doScheduleRedelivery(r,q)}});var e=$("#redeliveryPanel_"+p+" #scheduleRedelivery-receiveType_"+p);trackingApp.RD_activeRedeliveryDate(e.val(),p);e.on("change",function(){var q=this.id.split("_")[1];trackingApp.RD_activeRedeliveryDate($(this).val(),q)});trackingApp.RD_loadRedeliveryCalendar(p);$("#redeliveryPanel_"+p+" .mailtype-select").on("change",function(){trackingApp.RD_loadRedeliveryCalendar(p)});$("#redeliveryPanel_"+p+" .datepicker").on("click",function(){$(this).prop("readonly",true)})};trackingApp.RD_activeRedeliveryDate=function(p,s){var e=$("#redeliveryPanel_"+s);var r=$(e.selector+" .calendar-modal-link"),q=$(e.selector+" #scheduleRedelivery-date_"+s);if(p==="Redelivery"){q.prop("required",true);r.show()}else{q.removeAttr("required");r.hide()}$("#scheduleRedelivery_"+s).validator("destroy");$("#scheduleRedelivery_"+s).validator()};trackingApp.doScheduleRedelivery=function(p,e){var q=$("#scheduleRedelivery_"+e+", .input, .select, .textarea").serialize();var s={noRedelivery:'Sorry. Online redelivery is not available for this address.<br />Retreive your item at your local <span class="redelivery-address-error-link"><a href="https://tools.usps.com/go/POLocatorAction!input.action" target="_blank">Post Office</a></span>',lFNameRd:"Please enter a First Name.",lLNameRd:"Please enter a Last Name.",lEmailRd:"Please enter a Email Address.",lPhoneRd:"Please enter a Phone Number.",lStreetRd:"Please enter a Street Address.",lCityRd:"Please enter a City.",lStateRd:"Please enter a State.",lZipRd:"Please enter a ZIP Code&trade;.",lItemTypeRd:"Please select the type of item.",lDeliveryDateRd:"Please select a Redelivery Date.",lItemPreferenceRd:"Please select how you want to receieve your items."};var r=$("#rdButton_"+e).text();$("#rdButton_"+e).prop("disabled",true);$("#rdButton_"+e).text("Processing");$.ajax({url:"/go/TrackConfirmRedeliveryAJAXAction.action",type:"POST",dataType:"json",data:q,success:function(t){if(t.status===true){$(p.selector+" .panel-actions-content.scheduleRedelivery-content.success").removeClass("hidden");$(p.selector+" .panel-actions-content.scheduleRedelivery-content.error").addClass("hidden");$(p.selector+" .redeliveryPanalAction").addClass("hidden");trackingApp.showRedeliverySuccess($(p.selector+" .panel-actions-content.scheduleRedelivery-content.success"),t)}else{$(p.selector+" .panel-actions-content.scheduleRedelivery-content.error").removeClass("hidden");$(p.selector+" .panel-actions-content.scheduleRedelivery-content.success").addClass("hidden");if(t.checkAddressResult==false){$(p.selector+" .panel-actions-content.scheduleRedelivery-content.error .errorMsg").html(s.noRedelivery)}else{$(p.selector+" .panel-actions-content.scheduleRedelivery-content.error .errorMsg").html(t.errorMessage)}}},error:function(u,t){$(p.selector+" .panel-actions-content.scheduleRedelivery-content.error").removeClass("hidden");$(p.selector+" .panel-actions-content.scheduleRedelivery-content.success").addClass("hidden");$(p.selector+" .panel-actions-content.scheduleRedelivery-content.error .errorMsg").html("An error occurred while creating your Online redelivery. Please try again later.")},complete:function(t){$("#rdButton_"+e).prop("disabled",false);$("#rdButton_"+e).text(r)}})};trackingApp.showRedeliverySuccess=function(e,p){$(e.selector+" .redelivery-success-number--num").html(p.confirmationNumber);$(e.selector+" .redelivery-success-first-name").html(p.firstName);if(p.middleName){$(e.selector+" .redelivery-success-middle-initial").html(p.middleName+" ")}$(e.selector+" .redelivery-success-last-name").html(p.lastName);$(e.selector+" .redelivery-success-address-one").html(p.addressOne);if(p.addressTwo){$(e.selector+" .redelivery-success-address-two").html(p.addressTwo)}$(e.selector+" .redelivery-success-city").html(p.city);$(e.selector+" .redelivery-success-state").html(p.state);$(e.selector+" .redelivery-success-zip").html(p.zip);if(p.ext){$(e.selector+" .redelivery-success-phone").html(p.phone+" EXT. "+p.ext)}else{$(e.selector+" .redelivery-success-phone").html(p.phone)}$(e.selector+" .redelivery-success-email").html(p.email);if(p.redeliveryType.indexOf("Redelivery")!=-1){$(e.selector+" .redelivery-success-date").removeClass("hidden");$(e.selector+" .redelivery-success-date--date").html(p.redeliveryDate+".");$(e.selector+" .redelivery-success-address-verbiage").html("We will redeliver to:");$(e.selector+" .redelivery-success-mailtype-verbiage").html("Redelivering items of mail type:")}else{$(e.selector+" .redelivery-success-date").addClass("hidden");if(p.redeliveryType.indexOf("Pickup")!=-1){$(e.selector+" .redelivery-success-address-verbiage").html("We will hold mail for:");$(e.selector+" .redelivery-success-mailtype-verbiage").html("Holding items of mail type:")}else{if(p.redeliveryType.indexOf("Return")!=-1){$(e.selector+" .redelivery-success-address-verbiage").html("We will return to sender of mail for:");$(e.selector+" .redelivery-success-mailtype-verbiage").html("Returning items of mail type:")}}}$(e.selector+" .redelivery-success-mailtype").html(p.mailType);if(p.addtionalInformation){$(e.selector+" .redelivery-success-instructions").removeClass("hidden");$(e.selector+" .redelivery-success-additional-information").html(p.addtionalInformation)}else{$(e.selector+" .redelivery-success-mailtype-div").removeClass("redelivery-success-address");$(e.selector+" .redelivery-success-mailtype-div").addClass("redelivery-success-instructions")}};trackingApp.RD_setHolidays=function(){$.ajax({url:"/go/TrackConfirmRedeliveryAJAXAction_getPostalHolidays",type:"POST",dataType:"text",async:false,success:function(s){var x=[];var p=new DOMParser();var D=p.parseFromString(s,"text/xml");var y=D.documentElement.childNodes;for(var w=0,C=y.length;w<C;w++){var A=y[w].getAttribute("value"),q=y[w].childNodes;for(var v=0,e=q.length;v<e;v++){var z=q[v].getAttribute("value"),u=q[v].childNodes;for(var r=0,t=u.length;r<t;r++){var B=u[r].childNodes[1].childNodes[0].nodeValue;x.push(z+"/"+B+"/"+A)}}}trackingApp.holidayArray=x},error:function(q,e){var p="An error occurred while creating your Online email update. Please try again later.";if(q.status===0){p="Not connect.\n Verify Network."}else{if(q.status==404){p="Requested page not found. [404]"}else{if(q.status==500){p="Internal Server Error [500]."}else{if(e==="parsererror"){p="Requested JSON parse failed."}else{if(e==="timeout"){p="Time out error."}else{if(e==="abort"){p="Ajax request aborted."}else{p="Uncaught Error.\n"+q.responseText}}}}}}console.log(p)}})};trackingApp.RD_loadRedeliveryCalendar=function(r){if(trackingApp.holidayArray==null||trackingApp.holidayArray===undefined){trackingApp.RD_setHolidays()}if(trackingApp.cantUseArray[r]===undefined){trackingApp.RD_setCantUse(r)}var p=$("#redeliveryPanel_"+r+" .mailtype-select"),q=$("#redeliveryPanel_"+r+" .mailTypeForRedeliverDate"),e=$("#redeliveryPanel_"+r+" .returnDate");if(p.val()!=""){if(q.val()!=p.val()){q.val(p.val());trackingApp.RD_setCantUse(r)}}$("#redeliveryPanel_"+r+" .datepicker").datepicker("destroy");$("#redeliveryPanel_"+r+" .datepicker").datepicker({keyboardNavigation:true,todayHighlight:false,maxViewMode:0,onSelect:function(){$(this).valid()},autoclose:true,toggleActive:false,immediateUpdates:true,templates:{leftArrow:'<i class="icon-textlinkcarat_red_left"></i>',rightArrow:'<i class="icon-carat_right icon-textlinkcarat_red"></i>'},startDate:moment().add(0,"days").format("MM/DD/Y"),endDate:b(e.val()).format("MM/DD/Y"),daysOfWeekDisabled:[0],datesDisabled:trackingApp.holidayArray,beforeShowDay:function(s){if(n(s,r)){return{enabled:false,classes:"disabled"}}}});$("#redeliveryPanel_"+r+" .datepicker").datepicker("refresh")};trackingApp.RD_setCantUse=function(r){var e=$("#scheduleRedelivery_"+r+" .returnDate").val(),p=$("#scheduleRedelivery_"+r+" .returnDaysCount").val(),q=$("#scheduleRedelivery_"+r+" .mailTypeForRedeliverDate").val();$.ajax({url:"/go/TrackConfirmRedeliveryAJAXAction_getUnAvailableReturnDates?mailTypeForRedeliverDate="+q+"&returnDate="+e+"&returnDaysCount="+p,type:"POST",dataType:"text",async:false,success:function(w){var B=[];var t=new DOMParser();var H=t.parseFromString(w,"text/xml");var C=H.documentElement.childNodes;for(var A=0,G=C.length;A<G;A++){var E=C[A].getAttribute("value"),u=C[A].childNodes;for(var z=0,s=u.length;z<s;z++){var D=u[z].getAttribute("value"),y=u[z].childNodes;for(var v=0,x=y.length;v<x;v++){var F=y[v].childNodes[1].childNodes[0].nodeValue;B.push(D+"/"+F+"/"+E)}}}trackingApp.cantUseArray[r]=B},error:function(u,s){var t="An error occurred while creating your Online email update. Please try again later.";if(u.status===0){t="Not connect.\n Verify Network."}else{if(u.status==404){t="Requested page not found. [404]"}else{if(u.status==500){t="Internal Server Error [500]."}else{if(s==="parsererror"){t="Requested JSON parse failed."}else{if(s==="timeout"){t="Time out error."}else{if(s==="abort"){t="Ajax request aborted."}else{t="Uncaught Error.\n"+u.responseText}}}}}}console.log(t)}})};trackingApp.initProofOfDelivery=function(e){$("#proofOfDeliveryPanel_"+e+" .add-another-email").on("click",function(p){p.preventDefault();trackingApp.addProofEmailBlock(this)});$("#proofOfDeliveryPanel_"+e+" button.doProofOfDelivery").on("click",function(s){s.preventDefault();var p=this.id.split("_")[1];var q=$("#proofOfDeliveryPanel_"+p),t=$("#proofOfDelivery_"+p);$(q.selector+" .panel-actions-content.pod-updates-content.success").addClass("hidden");$(q.selector+" .panel-actions-content.pod-updates-content.error").addClass("hidden");var r=t.validator("validate").has(".has-error").length;if(!r){trackingApp.getProofOfDelivery(q,p)}});$("#proofOfDeliveryPanel_"+e+" a.doSignIn").on("click",function(p){p.preventDefault();window.location=trackSigninUrl});if(isUserLoggedIn){$("#podSignIn_"+e).hide()}else{$("#podSignIn_"+e).show()}};trackingApp.getProofOfDelivery=function(p,e){var q=$("#proofOfDelivery_"+e+", .input").serialize();var r=$("#podButton_"+e).text();$("#podButton_"+e).prop("disabled",true);$("#podButton_"+e).text("Processing");$.ajax({url:"/go/TrackConfirmAJAXAction.action",type:"POST",dataType:"json",data:q,success:function(s){if(s.status===true){$(p.selector+" .panel-actions-content.pod-updates-content.success").removeClass("hidden");$(p.selector+" .panel-actions-content.pod-updates-content.error").addClass("hidden");$(p.selector+" .podPanalAction").addClass("hidden");$(p.selector+" .panel-actions-content.pod-updates-content.success .responseString").html(s.responseString);$(p.selector+" .panel-actions-content.pod-updates-content.success .email1").html(s.tEmail1);if(s.tEmail2){$(p.selector+" .panel-actions-content.pod-updates-content.success .email2-div").removeClass("hidden");$(p.selector+" .panel-actions-content.pod-updates-content.success .email2").html(s.tEmail2)}if(s.tEmail3){$(p.selector+" .panel-actions-content.pod-updates-content.success .email3-div").removeClass("hidden");$(p.selector+" .panel-actions-content.pod-updates-content.success .email3").html(s.tEmail3)}}else{$(p.selector+" .panel-actions-content.pod-updates-content.error").removeClass("hidden");$(p.selector+" .panel-actions-content.pod-updates-content.success").addClass("hidden");$(p.selector+" .panel-actions-content.pod-updates-content.error .errorMsg").html("An error has occured. Please try your request again.  If the error still occurs, please contact 1-800-ASK-USPS.")}},error:function(t,s){$(p.selector+" .panel-actions-content.pod-updates-content.error").removeClass("hidden");$(p.selector+" .panel-actions-content.pod-updates-content.success").addClass("hidden");$(p.selector+" .panel-actions-content.pod-updates-content.error .errorMsg").html("An error has occured. Please try your request again.  If the error still occurs, please contact 1-800-ASK-USPS.")},complete:function(s){$("#podButton_"+e).prop("disabled",false);$("#podButton_"+e).text(r)}})};trackingApp.initReturnReceipt=function(e){$("#returnReceipt_"+e+" .add-another-email").on("click",function(p){p.preventDefault();trackingApp.addReturnReceiptEmailBlock(this)});$("#returnReceipt_"+e+" button.getReturnReceiptEmail").on("click",function(s){s.preventDefault();var p=this.id.split("_")[1];var q=$("#returnReceipt_"+p),t=$("#returnReceiptEmail_"+p);$(q.selector+" .panel-actions-content.rre-updates-content.success").addClass("hidden");$(q.selector+" .panel-actions-content.rre-updates-content.error").addClass("hidden");var r=t.validator("validate").has(".has-error").length;if(!r){trackingApp.getReturnReceiptEmail(q,p)}});$("#returnReceipt_"+e+" a.doSignIn").on("click",function(p){p.preventDefault();window.location=trackSigninUrl});if(isUserLoggedIn){$("#rreSignIn_"+e).hide()}else{$("#rreSignIn_"+e).show()}};trackingApp.getReturnReceiptEmail=function(p,e){var q=$("#returnReceiptEmail_"+e+", .input").serialize();var r=$("#rreButton_"+e).text();$("#rreButton_"+e).prop("disabled",true);$("#rreButton_"+e).text("Processing");$.ajax({url:"/go/TrackConfirmAJAXAction.action",type:"POST",dataType:"json",data:q,success:function(s){if(s.status===true){$(p.selector+" .panel-actions-content.rre-updates-content.success").removeClass("hidden");$(p.selector+" .panel-actions-content.rre-updates-content.error").addClass("hidden");$(p.selector+" .rrePanalAction").addClass("hidden");$(p.selector+" .panel-actions-content.rre-updates-content.success .responseString").html(s.responseString);$(p.selector+" .panel-actions-content.rre-updates-content.success .email1").html(s.tEmail1);if(s.tEmail2){$(p.selector+" .panel-actions-content.rre-updates-content.success .email2-div").removeClass("hidden");$(p.selector+" .panel-actions-content.rre-updates-content.success .email2").html(s.tEmail2)}if(s.tEmail3){$(p.selector+" .panel-actions-content.rre-updates-content.success .email3-div").removeClass("hidden");$(p.selector+" .panel-actions-content.rre-updates-content.success .email3").html(s.tEmail3)}}else{$(p.selector+" .panel-actions-content.rre-updates-content.error").removeClass("hidden");$(p.selector+" .panel-actions-content.rre-updates-content.success").addClass("hidden");$(p.selector+" .panel-actions-content.rre-updates-content.error .errorMsg").html("An error has occured. Please try your request again.  If the error still occurs, please contact 1-800-ASK-USPS.")}},error:function(t,s){$(p.selector+" .panel-actions-content.rre-updates-content.error").removeClass("hidden");$(p.selector+" .panel-actions-content.rre-updates-content.success").addClass("hidden");$(p.selector+" .panel-actions-content.rre-updates-content.error .errorMsg").html("An error has occured. Please try your request again.  If the error still occurs, please contact 1-800-ASK-USPS.")},complete:function(s){$("#rreButton_"+e).prop("disabled",false);$("#rreButton_"+e).text(r)}})};trackingApp.initDuplicate=function(e){$("#nd-link_"+e).on("click",function(p){p.preventDefault();$("#need-details-panel_"+e).removeClass("hide");$("#trackConfirmDetailsForm_"+e).validator("update")});$("#trackConfirmDetailsForm_"+e+" button.submitDuplicate").on("click",function(t){t.preventDefault();var q=this.id.split("_")[1];var s=$("#trackConfirmDetailsForm_"+q),p=$("#need-details-panel_"+q);$(p.selector+" #errors-details_"+e).addClass("hide");$(p.selector+" #errors-details-msg_"+e).html("");var r=s.validator("validate").has(".has-error").length;if(this.id.indexOf("zip")!=-1){r=$(s.selector+" #to-zip_"+e).has(".has-error").length}if(!r){trackingApp.submitDetailsAjax(p,q,this.id)}})};trackingApp.submitDetailsAjax=function(q,p,r){var s=$("#trackConfirmDetailsForm_"+p+", .input").serialize();var e=$("#toggle-submit_"+p);var t=$("#"+r).text();$("#"+r).prop("disabled",true);$("#"+r).text("Processing");$.ajax({url:"/go/TrackConfirmDuplicateDetailsAction",type:"POST",dataType:"json",data:s,success:function(u){if((u.success=="true")&&(u.mode!="zip")&&(u.mpdate.length>0)){trackingApp.reSubmitAllLabelsForDuplicateQuery(p)}else{if(e.val()==="0"){e.val("1");$(q.selector+" #tSendDate_"+p).val("");$(q.selector+" #to-zip_"+p).removeClass("hide");$(q.selector+" #send-date_"+p).addClass("hide");$("#trackConfirmDetailsForm_"+p).validator("update")}else{trackingApp.reSubmitAllLabelsForDuplicateQuery(p)}}},error:function(w,u){var v="An error occurred while creating your Online email update. Please try again later.";if(w.status===0){v="Not connect.\n Verify Network."}else{if(w.status==404){v="Requested page not found. [404]"}else{if(w.status==500){v="Internal Server Error [500]."}else{if(u==="parsererror"){v="Requested JSON parse failed."}else{if(u==="timeout"){v="Time out error."}else{if(u==="abort"){v="Ajax request aborted."}else{v="Uncaught Error.\n"+w.responseText}}}}}}$(q.selector+" #errors-details_"+p).removeClass("hide");$(q.selector+" #errors-details-msg_"+p).html(v)},complete:function(u){$("#"+r).prop("disabled",false);$("#"+r).text(t)}})};trackingApp.reSubmitAllLabelsForDuplicateQuery=function(e){var p=$("#trackConfirmDetailsForm_"+e+", .input").serialize();p=p.replace("qtc_tLabels","qtc_tLabels1");p=p.replace("qtc_senddate","qtc_senddate1");p=p.replace("qtc_zipcode","qtc_zipcode1");window.location.href="/go/TrackConfirmAction_input?"+p};trackingApp.initTrackProofOfDelivery=function(e){if(isUserLoggedIn){$("#trackPODSignIn_"+e).hide();$("#trackPOD_"+e).show()}else{$("#trackPODSignIn_"+e).show();$("#trackPOD_"+e).hide()}$("#trackPODPanel_"+e+" button.doSignIn").on("click",function(p){p.preventDefault();window.location=trackSigninUrl});$("#trackPODPanel_"+e+" .add-another-email").on("click",function(p){p.preventDefault();trackingApp.addTrackProofEmailBlock(this)});$("#trackPODPanel_"+e+" button.doTrackPOD").on("click",function(r){r.preventDefault();var p=this.id.split("_")[1];var t=$("#trackPODPanel_"+p),s=$("#trackPOD_"+p);$(t.selector+" .panel-actions-content.tpod-updates-content.success").addClass("hidden");$(t.selector+" .panel-actions-content.tpod-updates-content.error").addClass("hidden");var q=s.validator("validate").has(".has-error").length;if(!q){trackingApp.getTrackProofOfDelivery(t,p)}})};trackingApp.addTrackProofEmailBlock=function(r){var s=$(r).attr("id").split("_")[1],t=$("#trackPODPanel_"+s),q=$(t.selector+" .tpodEmailInput"),p=q.length;p++;if(p>3){$(r).hide()}else{var e='<div class="form-group"><label for="trackPOD_emaill'+p+"_"+s+'">Email Address</label><input type="email" class="form-control tpodEmailInput" id="trackPOD_email1'+p+"_"+s+'" name="tEmail'+p+'" placeholder="email123@mail.com" pattern="^([a-zA-Z0-9_\\-\\.]+)@([a-zA-Z0-9_\\-\\.]+).([a-zA-Z]{2,5})$" data-pattern-error="Please enter a valid e-mail address" data-required-error="Please enter your e-mail address"><div class="help-block with-errors"></div></div>';$(r).before(e);$("#trackPOD_email"+p+"_"+s).focus();$("#trackPOD_"+s).validator("update");if(p===3){$(r).hide()}}};trackingApp.getTrackProofOfDelivery=function(r,e){var p=$("#trackPOD_"+e+", .input").serialize();var q=$("#tpodButton_"+e).text();$("#tpodButton_"+e).prop("disabled",true);$("#tpodButton_"+e).text("Processing");$.ajax({url:"/go/TrackConfirmAJAXAction.action",type:"POST",dataType:"json",data:p,success:function(t){if(t.status===true){$(r.selector+" .panel-actions-content.tpod-updates-content.success").removeClass("hidden");$(r.selector+" .panel-actions-content.tpod-updates-content.error").addClass("hidden");$(r.selector+" .tpodPanalAction").addClass("hidden");$(r.selector+" .panel-actions-content.tpod-updates-content.success .responseString").html(t.responseString);$(r.selector+" .panel-actions-content.tpod-updates-content.success .email1").html(t.tEmail1);if(t.tEmail2){$(r.selector+" .panel-actions-content.tpod-updates-content.success .email2-div").removeClass("hidden");$(r.selector+" .panel-actions-content.tpod-updates-content.success .email2").html(t.tEmail2)}if(t.tEmail3){$(r.selector+" .panel-actions-content.tpod-updates-content.success .email3-div").removeClass("hidden");$(r.selector+" .panel-actions-content.tpod-updates-content.success .email3").html(t.tEmail3)}}else{$(r.selector+" .panel-actions-content.tpod-updates-content.error").removeClass("hidden");$(r.selector+" .panel-actions-content.tpod-updates-content.success").addClass("hidden");var s="An error has occured. Please try your request again.  If the error still occurs, please contact 1-800-ASK-USPS.";if(t.responseString!=null&&t.responseString.length>0){s=t.responseString}$(r.selector+" .panel-actions-content.tpod-updates-content.error .errorMsg").html(s)}},error:function(t,s){$(r.selector+" .panel-actions-content.tpod-updates-content.error").removeClass("hidden");$(r.selector+" .panel-actions-content.tpod-updates-content.success").addClass("hidden");$(r.selector+" .panel-actions-content.tpod-updates-content.error .errorMsg").html("An error has occured. Please try your request again.  If the error still occurs, please contact 1-800-ASK-USPS.")},complete:function(s){$("#tpodButton_"+e).prop("disabled",false);$("#tpodButton_"+e).text(q)}})};var h=trackingApp.getQueryStringParam("step");var g=trackingApp.getQueryStringParam("panel");var k=$(".change-delivery-module");if(h||g){k.each(function(e,p){if($(p).data().deliverymodule==h){$(p).show()}else{$(p).hide()}});$(".collapser").each(function(e,p){if(e==g){$(p).next().collapse("toggle")}})}$.fn.validator.Constructor.INPUT_SELECTOR=':input:not([type="hidden"], [type="submit"], [type="reset"], button):visible';$("#trackPackage").validator();if($(".diPanel")&&$(".diPanel").length>0){$(".diPanel").each(function(p,e){var q=$(e).attr("id").split("_")[1];$("#changeDeliveryInstructions_"+q).validator();trackingApp.initDeliveryInstructions(q)})}if($(".textAndEmailUpdatesPanel")&&$(".textAndEmailUpdatesPanel").length>0){$(".textAndEmailUpdatesPanel").each(function(p,q){var e=$(q).attr("id").split("_")[1];$("#textAndEmailUpdate_"+e).validator();trackingApp.initTextAndEmailUpdates(e)})}if($(".redeliveryPanel")&&$(".redeliveryPanel").length>0){$(".redeliveryPanel").each(function(p,q){var e=$(q).attr("id").split("_")[1];$("#scheduleRedelivery_"+e).validator();trackingApp.initScheduleRedelivery(e)})}if($(".proofOfDeliveryPanel")&&$(".proofOfDeliveryPanel").length>0){$(".proofOfDeliveryPanel").each(function(p,e){var q=$(e).attr("id").split("_")[1];$("#proofOfDelivery_"+q).validator();trackingApp.initProofOfDelivery(q)})}if($(".rrePanel")&&$(".rrePanel").length>0){$(".rrePanel").each(function(e,q){var p=$(q).attr("id").split("_")[1];$("#returnReceipt_"+p).validator();trackingApp.initReturnReceipt(p)})}if($(".duplicatePanel")&&$(".duplicatePanel").length>0){$(".duplicatePanel").each(function(e,q){var p=$(q).attr("id").split("_")[1];$("#trackConfirmDetailsForm_"+p).validator();trackingApp.initDuplicate(p)})}if($(".trackPODPanel")&&$(".trackPODPanel").length>0){$(".trackPODPanel").each(function(p,e){var q=$(e).attr("id").split("_")[1];$("#trackPODPanel_"+q).validator();trackingApp.initTrackProofOfDelivery(q)})}function b(e,p){e=moment(e);while(p>0){e=e.add(1,"days");if(e.isoWeekday()!==7){p-=1}}return e}function n(p,r){for(var q=0,e=trackingApp.cantUseArray[r].length;q<e;q++){if(moment(trackingApp.cantUseArray[r][q]).isSame(p)){return true}}return false}});document.addEventListener("touchstart",function addtouchclass(a){document.documentElement.classList.add("can-touch");document.removeEventListener("touchstart",addtouchclass,false)},false);